moveset-test_exec:
  Skills:
  - skill:Moveset{maxmoveset=4;reset=2;moveset_id=TEST;
    name="Test Moveset";
    1=[ - message{m="skill 1"} ];
    2=[ - message{m="skill 2"} ];
    3=[ - message{m="skill 3"} ];
    4=[ - message{m="skill 4"} ]} @self

# Use to make movesets for your weapons. All sorts of new features I cannot explain!
Moveset:
  Skill: moveset-exec

moveset:
  Skill: moveset-exec

moveset-exec:
  Conditions:
  - hasaura{aura=clickcombo-input} false
#  - hasaura{name=stun} castinstead stun-oncast
  Skills:
  - skill{s=setRandomID}
  - skill{s=eval-hit} @self
 # - modifyDamage{a=0;action=MULTIPLY_BASE;sync=true} #?~!isPlayer # ot=[ - e:p{p=reddust;a=2;hs=0.5;vs=1.4;y=1} ]
  # - aura{name=denykb;ma=true;d=2} @trigger 
  - skill{s=moveset-start}

moveset-start:
#  Cooldown: 0.05
  Skills:
  - setvar{var=moveset_id;type=STRING;value=<skill.moveset_id|<skill.id|default>>} @self
  - setvariable{var=caster.<skill.var.moveset_id>_maxmoveset;value=<skill.maxmoveset|3>} 
  - setvariable{var=caster.<skill.var.moveset_id>_moveset_index;
    value="min(<caster.var.<skill.var.moveset_id>_maxmoveset>,<caster.var.<skill.var.moveset_id>_moveset_index|0>+1)"}

  - aura{name=movesetreset;d="<skill.reset|1>*20";ma=true;oe=moveset-reset;bartimer=false}
  - setvariable{var=executeskill;value="<caster.var.<skill.var.moveset_id>_moveset_index>";type=STRING}
  - setvariable{var=crit;value=<skill.crit|<skill.<skill.var.executeskill>>>;type=STRING} 
  - setvariable{var=uppercut;value=<skill.uppercut|<skill.<skill.var.executeskill>>>;type=STRING} 

  - switch{condition=varequals{var=skill.hit;value=<case>};cases=
        case WEAK=[ - vskill{s=<skill.weak|[]>} ]
        case CRIT=[ - vskill{s=<skill.var.crit>} ]
        case SPRINT=[ - vskill{s=<skill.sprint|<skill.<skill.var.executeskill>>>} ]
        case UPPERCUT=[ - vskill{s=<skill.var.uppercut>} ]
        case AERIAL=[ - vskill{s=<skill.aerial|<skill.var.crit>>} ]
        case DEFAULT=[ - vskill{s=<skill.<skill.var.executeskill>>} ]
      }   

  - skill{s=moveset-end} 

moveset-end:
  Conditions:
  - variableEquals{var=caster.<skill.var.moveset_id>_moveset_index;value="<caster.var.<skill.var.moveset_id>_maxmoveset>"}
  Skills:
  - variableUnset{var=caster.<skill.var.moveset_id>_moveset_index} @self
  - removeaura{aura=movesetreset}
#  - message{m="moveset ended"} @server

moveset-reset:
  Conditions:
  - variableisset{var=caster.<skill.var.moveset_id>_moveset_index} 
  Skills:
  - variableUnset{var=caster.<skill.var.moveset_id>_moveset_index} 
#  - message{m="reset"} @server

#moveset-switch:
#  Skills:
#  - switch{condition=variableequals{var=caster.moveset_index;value=<case>};cases=
#        case 1=[ - vskill{s=<skill.1>} ]
#        case 2=[ - vskill{s=<skill.2>} ]
#        case 3=[ - vskill{s=<skill.3>} ]
#        case 4=[ - vskill{s=<skill.4>} ]
#        case 5=[ - vskill{s=<skill.5>} ]
#        case 6=[ - vskill{s=<skill.6>} ]
#        case 7=[ - vskill{s=<skill.7>} ]
#        case 8=[ - vskill{s=<skill.8>} ]
#        case 9=[ - vskill{s=<skill.9>} ]
#        case DEFAULT=[
#          - message{m="No skill set, out of bounds!"}
#          - skill{s=moveset-reset}
#          ]
#      }

  
  
